Bootstrap:docker
From:centos:centos7.4.1708

%post
    yum -y groupinstall "Development Tools"
    yum -y install epel-release \
                   git \
                   wget
    yum -y install R-3.5.1-1.el7.x86_64

    ##install X11 for Jupyter
    #https://www.itzgeek.com/how-tos/linux/centos-how-tos/install-gnome-gui-on-centos-7-rhel-7.html
    yum -y groupinstall "GNOME Desktop" "Graphical Administration Tools"
    ln -sf /lib/systemd/system/runlevel5.target /etc/systemd/system/default.target

    ##locales
    echo 'export LANG=en_US.UTF-8 LANGUAGE=C LC_ALL=C LC_CTYPE=C LC_COLLATE=C  LC_TIME=C LC_MONETARY=C LC_PAPER=C LC_MEASUREMENT=C' >> $SINGULARITY_ENVIRONMENT

    #BiocManager to allow further install of packages
    mkdir /usr/share/doc/R-3.5.1/html
    R --slave -e 'install.packages("BiocManager", repos="https://cloud.r-project.org/", quiet=T)'
    R --slave -e 'library("BiocManager"); BiocManager::install("IRkernel", repos="https://cloud.r-project.org/", quiet=T)
    R --slave -e 'library("BiocManager"); BiocManager::install("Cairo", repos="https://cloud.r-project.org/", quiet=T)
